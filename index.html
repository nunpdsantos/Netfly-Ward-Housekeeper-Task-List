<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Ward Housekeeper – Task List</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
  <style>
    :root {
      /* --- Colors: Modern Clinical Palette --- */
      --primary: #0ea5e9;       /* Sky Blue */
      --primary-dark: #0284c7;
      --bg-app: #f8fafc;        /* Slate 50 */
      --bg-card: #ffffff;
      --text-main: #0f172a;     /* Slate 900 */
      --text-muted: #64748b;    /* Slate 500 */
      --border: #e2e8f0;

      /* Section Accents */
      --accent-morn: #f59e0b;   /* Amber */
      --bg-morn: #fffbeb;
      --accent-noon: #10b981;   /* Emerald */
      --bg-noon: #ecfdf5;
      --accent-eve: #6366f1;    /* Indigo */
      --bg-eve: #eef2ff;
      --accent-on: #64748b;     /* Slate */
      --bg-on: #f1f5f9;
      --accent-wk: #ec4899;     /* Pink */
      --bg-wk: #fdf2f8;

      /* UI Variables */
      --radius: 16px;
      --shadow: 0 4px 6px -1px rgba(0,0,0,0.05), 0 2px 4px -1px rgba(0,0,0,0.03);
    }

    * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
      background-color: var(--bg-app);
      color: var(--text-main);
      margin: 0;
      padding: 0;
      padding-bottom: 40px;
    }

    /* --- LAYOUT & HEADER --- */
    .app-shell {
      max-width: 600px; 
      margin: 0 auto;
      padding: 16px;
    }

    header {
      margin-bottom: 12px;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .top-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 12px;
    }

    h1 {
      font-size: 1.35rem;
      font-weight: 800;
      margin: 0;
      color: var(--text-main);
      letter-spacing: -0.02em;
    }

    .subtitle {
      font-size: 0.9rem;
      color: var(--text-muted);
      margin-top: 2px;
    }

    /* --- CONTROLS (View Toggle) --- */
    .view-toggle {
      background: #e2e8f0;
      border-radius: 100px;
      padding: 4px;
      display: flex;
      position: relative;
      width: fit-content;
      flex-shrink: 0;
    }

    .view-btn {
      border: none;
      background: none;
      padding: 6px 16px;
      font-size: 0.8rem;
      font-weight: 600;
      color: var(--text-muted);
      border-radius: 100px;
      cursor: pointer;
      z-index: 2;
      transition: color 0.2s;
    }

    .view-btn.active { color: var(--text-main); }

    .toggle-slider {
      position: absolute;
      top: 4px; left: 4px; bottom: 4px;
      width: 50%;
      background: white;
      border-radius: 100px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
      transition: transform 0.25s cubic-bezier(0.2, 0.8, 0.2, 1);
      z-index: 1;
    }
    
    .view-toggle[data-state="compact"] .toggle-slider { transform: translateX(0); width: 85px; }
    .view-toggle[data-state="detailed"] .toggle-slider { transform: translateX(85px); width: 85px; }

    /* --- TOP PROGRESS BAR (SUBTLE) --- */
    .progress-bar-container {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 10px;
      padding: 8px 12px;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.02);
      border: 1px solid rgba(148, 163, 184, 0.25);
    }

    .progress-label {
      display: flex;
      align-items: baseline;
      gap: 4px;
      font-size: 0.78rem;
      color: var(--text-muted);
      white-space: nowrap;
    }

    .prog-text {
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.06em;
      font-size: 0.7rem;
    }

    .prog-count {
      font-weight: 600;
      color: var(--text-main);
    }

    .progress-bar-track {
      position: relative;
      flex: 1;
      height: 4px;
      border-radius: 999px;
      background: #e2e8f0;
      overflow: hidden;
    }

    .prog-bar-fill {
      position: absolute;
      left: 0;
      top: 0;
      bottom: 0;
      width: 0%;
      background: var(--primary);
      transition: width 0.3s ease;
    }

    .progress-reset-btn {
      border: none;
      background: transparent;
      padding: 4px;
      border-radius: 999px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--text-muted);
      flex-shrink: 0;
    }

    .progress-reset-btn:hover {
      background: rgba(148, 163, 184, 0.16);
      color: var(--text-main);
    }

    .progress-reset-btn svg {
      width: 16px;
      height: 16px;
    }

    /* --- FILTERS (Horizontal Scroll) --- */
    .filters-wrapper {
      position: sticky;
      top: 0;
      z-index: 50;
      background: rgba(248, 250, 252, 0.96);
      backdrop-filter: blur(8px);
      margin: 0 -16px;
      padding: 10px 0;
      border-bottom: 1px solid rgba(0,0,0,0.05);
    }

    .filter-scroll {
      display: flex;
      gap: 10px;
      overflow-x: auto;
      padding: 0 16px 8px 16px;
      scrollbar-width: none;
    }
    .filter-scroll::-webkit-scrollbar { display: none; }

    .filter-btn {
      background: var(--bg-card);
      border: 1px solid var(--border);
      padding: 8px 16px;
      border-radius: 100px;
      font-size: 0.85rem;
      font-weight: 600;
      color: var(--text-muted);
      white-space: nowrap;
      display: flex;
      align-items: center;
      gap: 6px;
      cursor: pointer;
      transition: all 0.2s;
      box-shadow: 0 1px 2px rgba(0,0,0,0.03);
      flex-shrink: 0;
    }

    .filter-btn svg { width: 16px; height: 16px; }

    .filter-btn.active {
      background: var(--text-main);
      color: white;
      border-color: var(--text-main);
    }
    .filter-btn.active svg { stroke: white; }

    /* --- TASK CARDS --- */
    .task-list {
      display: flex;
      flex-direction: column;
      gap: 12px;
      margin-top: 16px;
    }

    .task-card {
      background: var(--bg-card);
      border-radius: var(--radius);
      padding: 16px;
      box-shadow: var(--shadow);
      display: flex;
      gap: 14px;
      transition: transform 0.15s ease;
      cursor: pointer;
      border-left: 4px solid transparent;
      position: relative;
      overflow: hidden;
    }

    .task-card:active { transform: scale(0.98); }

    .task-card[data-sec="morning"] { border-left-color: var(--accent-morn); }
    .task-card[data-sec="midday"] { border-left-color: var(--accent-noon); }
    .task-card[data-sec="evening"] { border-left-color: var(--accent-eve); }
    .task-card[data-sec="ongoing"] { border-left-color: var(--accent-on); }
    .task-card[data-sec="weekly"] { border-left-color: var(--accent-wk); }

    .check-circle {
      width: 24px;
      height: 24px;
      border-radius: 50%;
      border: 2px solid var(--border);
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
      transition: all 0.2s;
      color: white;
      margin-top: 2px;
    }
    
    .task-card.done .check-circle {
      background: var(--primary);
      border-color: var(--primary);
    }

    .card-content { flex: 1; }

    .card-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 4px;
      gap: 10px;
    }

    .card-title {
      font-size: 1rem;
      font-weight: 600;
      line-height: 1.35;
      margin-right: 8px;
      color: var(--text-main);
    }

    .task-card.done .card-title {
      text-decoration: line-through;
      color: var(--text-muted);
    }

    .time-badge {
      font-size: 0.75rem;
      font-weight: 700;
      color: var(--text-muted);
      background: #f1f5f9;
      padding: 4px 8px;
      border-radius: 6px;
      white-space: nowrap;
      flex-shrink: 0;
    }

    .task-card.compact .card-desc,
    .task-card.compact .card-tags {
      display: none;
    }
    
    .card-desc {
      font-size: 0.9rem;
      color: #475569;
      line-height: 1.5;
      margin-top: 8px;
      margin-bottom: 12px;
    }

    .card-tags {
      display: flex;
      gap: 6px;
      flex-wrap: wrap;
    }

    .tag {
      font-size: 0.7rem;
      font-weight: 600;
      padding: 3px 8px;
      border-radius: 6px;
      letter-spacing: 0.02em;
      display: flex;
      align-items: center;
      gap: 4px;
    }
    
    .task-card[data-sec="morning"] .tag { background: var(--bg-morn); color: var(--accent-morn); }
    .task-card[data-sec="midday"] .tag { background: var(--bg-noon); color: var(--accent-noon); }
    .task-card[data-sec="evening"] .tag { background: var(--bg-eve); color: var(--accent-eve); }
    .task-card[data-sec="ongoing"] .tag { background: var(--bg-on); color: var(--accent-on); }
    .task-card[data-sec="weekly"] .tag { background: var(--bg-wk); color: var(--accent-wk); }

  </style>
</head>
<body>

  <div class="app-shell">
    
    <header>
      <div class="top-bar">
        <div>
          <h1>Ward Housekeeper – Task List</h1>
          <div class="subtitle">Daily schedule, ongoing and weekly tasks</div>
        </div>
        
        <div class="view-toggle" id="viewToggle" data-state="detailed">
          <div class="toggle-slider"></div>
          <button class="view-btn" onclick="setView('compact')">Compact</button>
          <button class="view-btn" onclick="setView('detailed')">Detailed</button>
        </div>
      </div>
    </header>

    <div class="progress-bar-container">
      <div class="progress-label">
        <span class="prog-text">PROGRESS</span>
        <span class="prog-count" id="progCount">0/0</span>
      </div>
      <div class="progress-bar-track">
        <div class="prog-bar-fill" id="progFill"></div>
      </div>
      <button class="progress-reset-btn" onclick="resetApp()" aria-label="Reset progress">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/>
          <path d="M3 3v5h5"/>
        </svg>
      </button>
    </div>

    <div class="filters-wrapper">
      <div class="filter-scroll" id="filterContainer"></div>
    </div>

    <div class="task-list" id="taskList"></div>

  </div>

  <script>
    const ICONS = {
      all: '<path d="M8 6h13M8 12h13M8 18h13M3 6h.01M3 12h.01M3 18h.01" />',
      morning: '<path d="M12 2v2M12 20v2M4.93 4.93l1.41 1.41M17.66 17.66l1.41 1.41M2 12h2M20 12h2M6.34 17.66l-1.41 1.41M19.07 4.93l-1.41 1.41"/><circle cx="12" cy="12" r="4"/>',
      midday: '<circle cx="12" cy="12" r="5"/><path d="M12 1v2"/><path d="M12 21v2"/><path d="M4.22 4.22l1.42 1.42"/><path d="M18.36 18.36l1.42 1.42"/><path d="M1 12h2"/><path d="M21 12h2"/><path d="M4.22 19.78l1.42-1.42"/><path d="M18.36 5.64l1.42-1.42"/>',
      evening: '<path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"/>',
      ongoing: '<path d="M21.5 2v6h-6M21.34 5.5A10 10 0 1 1 11.26 2.75"/>',
      weekly: '<rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/>',
      check: '<polyline points="20 6 9 17 4 12"/>'
    };

    function getIcon(name) {
      return `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">${ICONS[name] || ICONS.all}</svg>`;
    }

    const tasks = [
      // MORNING
      {
        id: "m1",
        sec: "morning",
        title: "Serve Breakfast",
        time: "07:00–09:00",
        desc: "Serve breakfast trays to patients, assisting as needed and ensuring all patients are offered their meal.",
        tag: "Meals"
      },
      {
        id: "m2",
        sec: "morning",
        title: "Fridge & Freezer Temperatures",
        time: "Morning & afternoon",
        desc: "Check and record fridge and freezer temperatures twice daily. Fridges must be below 5°C and freezers below −18°C; escalate any out-of-range readings.",
        tag: "Food safety"
      },
      {
        id: "m3",
        sec: "morning",
        title: "Menus for Bed Moves & Admissions",
        time: "By 09:30 & 13:30",
        desc: "Check menus on the tablet for bed moves and new admissions. Ensure menus are completed and uploaded before 09:30 a.m. for lunch and 1:30 p.m. for supper.",
        tag: "Menus"
      },
      {
        id: "m4",
        sec: "morning",
        title: "Stock Checks & Helpdesk Orders",
        time: "09:00 & 14:00",
        desc: "Check bread, milk, juices and other staples. Order bread by 09:00 and milk by 14:00 via the helpdesk (5555) for orders or cancellations.",
        tag: "Ordering"
      },
      {
        id: "m5",
        sec: "morning",
        title: "Collect Breakfast Dishes & Wash Up",
        time: "Post-breakfast",
        desc: "Collect all breakfast dishes, clear tables and load the dishwasher so equipment is washed and ready for the next meal service.",
        tag: "Hygiene"
      },
      {
        id: "m6",
        sec: "morning",
        title: "Rotate Food & Supplements (Fridge)",
        time: "Morning",
        desc: "Check expiry dates on patient food and nutritional supplements in the fridge. Rotate stock using FIFO (First In, First Out) and remove any out-of-date items.",
        tag: "Stock rotation"
      },
      {
        id: "m7",
        sec: "morning",
        title: "Clean Pantry Appliances & Storage",
        time: "Morning",
        desc: "Clean inside cupboards, the microwave, fridges and the freezer, keeping the ward pantry clean and compliant with food safety guidance.",
        tag: "Cleaning"
      },
      {
        id: "m8",
        sec: "morning",
        title: "Restock Tea & Breakfast Trolley",
        time: "Morning",
        desc: "Restock the tea and breakfast trolley with drinks, crockery and consumables so it is ready for use.",
        tag: "Restock"
      },
      {
        id: "m9",
        sec: "morning",
        title: "Morning Tea Round",
        time: "10:30",
        desc: "Complete the 10:30 a.m. tea round, offering hot drinks and refreshments to patients.",
        tag: "Drinks"
      },
      {
        id: "m10",
        sec: "morning",
        title: "Restock Nurse & IV Stations",
        time: "Morning",
        desc: "Restock nurse station and IV station with required items and check sharps bins, replacing them if they are approaching the fill line.",
        tag: "Stations & sharps"
      },
      {
        id: "m11",
        sec: "morning",
        title: "Start Visiting Patients for Next-Day Menus",
        time: "Morning",
        desc: "Begin visiting each patient to record their lunch and supper choices for the following day on the tablet, making sure that all dietary requirements for each patient are observed throughout the menus.",
        tag: "Menus"
      },

      // MIDDAY
      {
        id: "d1",
        sec: "midday",
        title: "Prepare Trays for Lunch",
        time: "Before 12:30",
        desc: "Prepare trays and set up for the lunch service so that meals can be delivered promptly and safely.",
        tag: "Prep"
      },
      {
        id: "d2",
        sec: "midday",
        title: "Assist with Lunch Service",
        time: "12:30",
        desc: "Assist with serving lunch at 12:30 p.m., ensuring patients receive the correct meals and any assistance required.",
        tag: "Meals"
      },
      {
        id: "d3",
        sec: "midday",
        title: "Collect Lunch Trays",
        time: "Post-lunch",
        desc: "Collect all lunch trays after the meal and send them back to the kitchen for washing, leaving bedside tables clean and clear.",
        tag: "Hygiene"
      },
      {
        id: "d4",
        sec: "midday",
        title: "Afternoon Tea Round",
        time: "Afternoon",
        desc: "Carry out the afternoon tea round, offering hot drinks and refreshments to patients.",
        tag: "Drinks"
      },
      {
        id: "d5",
        sec: "midday",
        title: "Restock PPE & Clinell Wipes",
        time: "Afternoon",
        desc: "Restock PPE and consumables as required, including gloves, aprons and masks in all rooms, and ensure Clinell wipes are fully stocked throughout the ward.",
        tag: "PPE & wipes"
      },
      {
        id: "d6",
        sec: "midday",
        title: "Ariba Ordering (Supplies)",
        time: "As required",
        desc: "Check if any orders are needed from Ariba when stock is low (e.g. bowls, cutlery, small plates, paper roll, Heinz soups, sugar, blue cups and other supplies) and place orders as required.",
        tag: "Ordering"
      },
      {
        id: "d7",
        sec: "midday",
        title: "Same-Day Supper Menus on Tablet",
        time: "By 13:30",
        desc: "Ensure that all patients have their supper choices for the same day recorded on the tablet. Confirm that all supper menus are completed and uploaded by 1:30 p.m.",
        tag: "Menus"
      },

      // EVENING
      {
        id: "e1",
        sec: "evening",
        title: "Assist with Supper Service",
        time: "17:30",
        desc: "Assist with the supper service at 5:30 p.m. by delivering trays provided by Catering and ensuring patients receive the correct meals.",
        tag: "Meals"
      },
      {
        id: "e2",
        sec: "evening",
        title: "Collect Supper Trays",
        time: "Post-supper",
        desc: "Collect all supper trays after the meal, send them back for washing and clear bedside tables.",
        tag: "Hygiene"
      },
      {
        id: "e3",
        sec: "evening",
        title: "Late Tea Round",
        time: "Evening",
        desc: "Complete the late tea round, offering drinks and refreshments to patients in the evening.",
        tag: "Drinks"
      },
      {
        id: "e4",
        sec: "evening",
        title: "Prepare Trolleys for Next Morning",
        time: "End of shift",
        desc: "Clean and restock the tea trolley and breakfast trolley so they are fully prepared for the following morning.",
        tag: "Prep"
      },

      // ONGOING
      {
        id: "o1",
        sec: "ongoing",
        title: "Drinks on Request",
        time: "All day",
        desc: "Provide additional drinks on request throughout the day, responding promptly to patient hydration needs.",
        tag: "Hydration"
      },
      {
        id: "o2",
        sec: "ongoing",
        title: "Fresh Water & Jugs",
        time: "All day",
        desc: "Ensure fresh drinking water and clean jugs are available throughout the ward, checking and replenishing regularly.",
        tag: "Hydration"
      },
      {
        id: "o3",
        sec: "ongoing",
        title: "Pantry Cleanliness & Food Dating",
        time: "All day",
        desc: "Maintain cleanliness of the ward pantry. Ensure all opened items are correctly dated and discard any expired, undated or open food in line with food safety guidance.",
        tag: "Food safety"
      },
      {
        id: "o4",
        sec: "ongoing",
        title: "Stock Rotation & Expiry Checks",
        time: "All day",
        desc: "Check expiry dates and rotate all ward food items and nutritional supplements using FIFO (First In, First Out), removing anything out of date.",
        tag: "Stock rotation"
      },
      {
        id: "o5",
        sec: "ongoing",
        title: "Dishwasher Maintenance",
        time: "Start & end of shift",
        desc: "At the start and end of the shift drain and refill the dishwasher water. Check detergent, sanitiser and salt levels and clean the filter daily.",
        tag: "Equipment"
      },

      // WEEKLY
      {
        id: "w1",
        sec: "weekly",
        title: "Clean Mobile Equipment",
        time: "Weekly",
        desc: "Carry out weekly cleaning of mobile equipment including drip stands, mobile computers, phones, drip trolleys and folder trolleys.",
        tag: "Weekly clean"
      },
      {
        id: "w2",
        sec: "weekly",
        title: "Patient Boards & Leaflet Holders",
        time: "Weekly",
        desc: "Check and tidy patient information boards and leaflet holders weekly, removing outdated materials and tidying or restocking as needed.",
        tag: "Information"
      },
      {
        id: "w3",
        sec: "weekly",
        title: "Tap Flushing & Recording",
        time: "Tue & Sat",
        desc: "On Tuesdays and Saturdays flush all ward taps, including patient room sinks, shower taps and wall-mounted sinks, and record each flush in the housekeeper schedule folder.",
        tag: "Water safety"
      }
    ];

    const SECTIONS = [
      { id: 'all', label: 'All', icon: 'all' },
      { id: 'morning', label: 'Morning', icon: 'morning' },
      { id: 'midday', label: 'Midday', icon: 'midday' },
      { id: 'evening', label: 'Evening', icon: 'evening' },
      { id: 'ongoing', label: 'Ongoing', icon: 'ongoing' },
      { id: 'weekly', label: 'Weekly', icon: 'weekly' }
    ];

    let state = {
      completed: JSON.parse(localStorage.getItem('ward_tasks_clean_v3') || '{}'),
      viewMode: localStorage.getItem('ward_view_mode') || 'detailed',
      filter: 'all'
    };

    function init() {
      renderFilters();
      updateUI();
      renderTasks();
    }

    function renderFilters() {
      const container = document.getElementById('filterContainer');
      container.innerHTML = SECTIONS.map(s => `
        <button class="filter-btn ${state.filter === s.id ? 'active' : ''}" 
                onclick="setFilter('${s.id}')">
          ${getIcon(s.icon)} ${s.label}
        </button>
      `).join('');
    }

    function renderTasks() {
      const container = document.getElementById('taskList');
      const filtered = tasks.filter(t => state.filter === 'all' || t.sec === state.filter);
      
      container.innerHTML = filtered.map(t => {
        const isDone = !!state.completed[t.id];
        return `
        <div class="task-card ${state.viewMode} ${isDone ? 'done' : ''}" 
             data-sec="${t.sec}" onclick="toggleTask('${t.id}')">
          <div class="check-circle">${getIcon('check')}</div>
          <div class="card-content">
            <div class="card-header">
              <div class="card-title">${t.title}</div>
              <div class="time-badge">${t.time}</div>
            </div>
            <div class="card-desc">${t.desc}</div>
            <div class="card-tags">
              <span class="tag">${t.tag}</span>
            </div>
          </div>
        </div>`;
      }).join('');
      
      updateProgress();
    }

    window.setFilter = (filterId) => {
      state.filter = filterId;
      renderFilters();
      renderTasks();
      window.scrollTo({top: 0, behavior: 'smooth'});
    };

    window.setView = (mode) => {
      state.viewMode = mode;
      localStorage.setItem('ward_view_mode', mode);
      document.getElementById('viewToggle').dataset.state = mode;
      renderTasks();
    };

    window.toggleTask = (id) => {
      if (state.completed[id]) delete state.completed[id];
      else state.completed[id] = true;
      localStorage.setItem('ward_tasks_clean_v3', JSON.stringify(state.completed));
      renderTasks();
    };

    window.updateUI = () => {
      document.getElementById('viewToggle').dataset.state = state.viewMode;
    };

    window.updateProgress = () => {
      const total = tasks.length;
      const done = Object.keys(state.completed).length;
      const pct = total === 0 ? 0 : Math.round((done / total) * 100);
      document.getElementById('progCount').innerText = `${done}/${total}`;
      document.getElementById('progFill').style.width = pct + '%';
    };

    window.resetApp = () => {
      if (confirm('Start fresh? This will clear all ticks.')) {
        state.completed = {};
        localStorage.setItem('ward_tasks_clean_v3', '{}');
        renderTasks();
      }
    };

    init();
  </script>
</body>
</html>
